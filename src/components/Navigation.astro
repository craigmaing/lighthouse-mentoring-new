---
const currentPath = Astro.url.pathname;

const navItems = [
  { label: 'Board Advisory', href: '/board-advisory' },
  { label: 'Strategic Services', href: '/services' },
  { label: 'About', href: '/about' },
  { label: 'Insights', href: '/blog' },
  { label: 'Contact', href: '/contact' }
];

const isActive = (href: string) => {
  if (href === '/') {
    return currentPath === href;
  }
  return currentPath.startsWith(href);
};
---

<nav class="bg-white/95 backdrop-blur-md shadow-md sticky top-0 z-50 border-b border-gray-200">
  <div class="container max-w-7xl mx-auto px-4 lg:px-8">
    <div class="flex justify-between items-center h-20">
      <!-- Logo and Credentials -->
      <div class="flex items-center">
        <a href="/" class="flex items-center gap-3 group">
          <div class="relative">
            <div class="absolute inset-0 bg-primary rounded-xl opacity-0 group-hover:opacity-10 transition-all duration-300"></div>
            <img
              src="/images/lighthouse-mentoring-logo.png"
              alt="Lighthouse Mentoring"
              class="h-12 lg:h-14 w-auto relative z-10 transition-transform duration-300 group-hover:scale-105"
            />
          </div>
          <div class="hidden sm:flex flex-col">
            <span class="text-xl lg:text-2xl font-bold text-primary">Lighthouse</span>
            <span class="text-xs text-gray-600 font-semibold uppercase tracking-wider">Mentoring</span>
          </div>
        </a>
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center gap-1 xl:gap-2">
        {navItems.map((item) => (
          <a
            href={item.href}
            class={`px-4 py-2 text-sm xl:text-[15px] font-medium rounded-full transition-all duration-300 ${
              isActive(item.href)
                ? 'bg-accent/10 text-accent shadow-sm'
                : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900 hover:shadow-sm'
            }`}
          >
            {item.label}
          </a>
        ))}
        <div class="ml-3 h-8 w-px bg-gray-300"></div>
        <a
          href="/assessment"
          class="ml-3 px-6 py-2.5 bg-accent text-white rounded-full hover:bg-accent/90 transition-all duration-300 shadow-button hover:shadow-button-hover text-sm xl:text-[15px] font-semibold transform hover:scale-105 btn-scale"
        >
          Get Free Assessment
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-button"
        class="lg:hidden p-2.5 rounded-xl bg-gray-50 hover:bg-gray-100 transition-all duration-300 hover:shadow-md"
        aria-label="Toggle menu"
      >
        <svg class="w-6 h-6 text-neutral-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="hidden lg:hidden bg-white border-t shadow-xl">
    <div class="px-4 py-4 space-y-2">
      {navItems.map((item) => (
        <a
          href={item.href}
          class={`block py-3 px-4 rounded-lg transition-all duration-300 ${
            isActive(item.href) ? 'bg-accent/10 text-accent font-semibold shadow-sm' : 'text-gray-700 hover:bg-gray-50'
          }`}
        >
          {item.label}
        </a>
      ))}
      <a
        href="/contact#book"
        class="block w-full py-3 px-4 bg-gradient-to-r from-accent to-accent/90 text-white text-center rounded-xl hover:from-accent/90 hover:to-accent transition-all duration-300 font-semibold shadow-button hover:shadow-button-hover mt-3"
      >
        Book Consultation
      </a>
    </div>
  </div>
</nav>

<script>
  const menuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');

  menuButton?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });
</script>